<header class="app-header">
    <button class="hamburger" (click)="toggle()"><i class="fa-solid fa-bars" aria-hidden="true"></i></button>
    <div class="logo-wrap">
        <img [src]="logoUrl" alt="logo" width="120" />
    </div>
    <div class="spacer"></div>
    <button class="fullscreen-btn" (click)="toggleFullscreen()"
        [attr.title]="isFullscreen ? 'Exit fullscreen' : 'Enter fullscreen'">
        <i [class]="isFullscreen ? 'fa-solid fa-compress' : 'fa-solid fa-expand'" aria-hidden="true"></i>
    </button>
</header>

<div class="menu-backdrop" *ngIf="open" (click)="close()"></div>

<nav #sideMenu class="side-menu" [class.open]="open">
    <div class="side-head">
        <div class="user-info">
            <strong class="side-title">{{ userName }}</strong>
            <span class="user-role" [ngClass]="{
                'role-superadmin': isSuperAdmin,
                'role-ho': isHO && !isSuperAdmin,
                'role-branch': isBranch && !isHO && !isSuperAdmin
            }">
                {{ isSuperAdmin ? 'Super Admin' : (isHO ? 'Head Office' : (isBranch ? 'Branch' : 'User')) }}
            </span>
        </div>
        <button class="side-close" (click)="close()" aria-label="Close menu"><i class="fa-solid fa-xmark"
                aria-hidden="true"></i></button>
    </div>
    <ul>
        <!-- Super Admin menu -->
        <li *ngIf="isSuperAdmin">
            <a routerLink="/super-admin" (click)="close()" aria-label="Super Admin Dashboard">
                <i class="fa-solid fa-crown" aria-hidden="true"></i>
                <span>Super Admin</span>
            </a>
        </li>
        <!-- HO Dashboard menu -->
        <li *ngIf="isHO">
            <a routerLink="/dashboard" (click)="close()" aria-label="Dashboard">
                <i class="fa-solid fa-chart-line" aria-hidden="true"></i>
                <span>Dashboard</span>
            </a>
        </li>
        <!-- POS menu - for branch users AND HO users with billing enabled -->
        <li *ngIf="shouldShowPOS">
            <a routerLink="/pos" (click)="close()" aria-label="POS">
                <i class="fa-solid fa-desktop" aria-hidden="true"></i>
                <span>POS</span>
            </a>
        </li>
        <li>
            <a routerLink="/customers" (click)="close()" aria-label="Customers">
                <i class="fa-solid fa-users" aria-hidden="true"></i>
                <span>Customers</span>
            </a>
        </li>
        <li>
            <a routerLink="/profile" (click)="close()">
                <i class="fa-solid fa-user"></i>
                <span>Profile</span>
            </a>
        </li>
        <li>
            <a (click)="onLogout()">
                <i class="fa-solid fa-right-from-bracket"></i>
                <span>Logout</span>
            </a>
        </li>
    </ul>
</nav>